/*! For license information please see 4107.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4107],{76199:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(74061),o=(0,n.defineComponent)({name:"Promotion"});const a={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},i=(0,n.createVNode)("path",{fill:"currentColor",d:"m64 448 832-320-128 704-446.08-243.328L832 192 242.816 545.472 64 448zm256 512V657.024L512 768 320 960z"},null,-1);o.render=function(e,t,r,o,c,l){return(0,n.openBlock)(),(0,n.createBlock)("svg",a,[i])},o.__file="packages/components/Promotion.vue";const c=o},76291:(e,t,r)=>{r.d(t,{A:()=>n});const n="/dist/images/kefu.png?a27c63dc413a8746c844465481179581"},89909:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(76798),o=r.n(n)()((function(e){return e[1]}));o.push([e.id,".shadow{box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.text_over{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.chat_main{height:100%}.chat_main.position_css{border-radius:4px;box-shadow:0 2px 12px 0 rgba(0,0,0,.1);height:50%;left:25%;margin:0 auto;position:fixed;top:20%;width:50%;z-index:901}.chat_main.position_css .left_block{border-radius:4px 0 0 4px}.chat_main.position_css .right_block{border-radius:0 4px 4px 0}.chat_main.position_css .top_title{border-radius:0 4px 0 0}.small_main{align-items:center;background:#333;border-radius:6px 0 0 0;bottom:0;color:#fff;cursor:pointer;display:flex;height:40px;justify-content:center;padding-top:5px;position:absolute;right:0;width:50px}.small_main.small_socket_status{background:var(--el-color-primary)}.main_block{display:flex;height:100%}.main_block.position_css{box-shadow:0 2px 12px 0 rgba(0,0,0,.1);position:absolute}.main_block .left_block{background:#333;box-sizing:border-box;flex:0 0 200px}.main_block .left_block ul{display:flex;flex-flow:column;height:100%}.main_block .left_block ul li{color:#fff;cursor:pointer;display:flex;height:40px;padding:20px}.main_block .left_block ul li.ck,.main_block .left_block ul li:hover{background:#666}.main_block .left_block ul li .content_item{display:flex}.main_block .left_block ul li .avatar{background:#ccc;border-radius:6px;flex:0 0 40px;height:40px;margin-right:10px;width:40px}.main_block .left_block ul li .avatar_right{width:110px}.main_block .left_block ul li .avatar_right .nickname{padding-top:2px}.main_block .left_block ul li .avatar_right .text{color:#ccc;font-size:12px}.main_block .right_block{background:#fff;display:flex;flex:1;flex-flow:column}.main_block .right_block .top_title{background:#efefef;line-height:40px;text-align:center}.main_block .right_block .top_title span{cursor:pointer;float:right;margin-right:15px}.main_block .right_block .top_title span:hover{color:var(--el-color-primary)}.main_block .right_block .scrollbar_inner{display:flex;flex:1;flex-direction:column}.main_block .right_block .chat_content{flex:1;height:calc(100% - 180px)}.main_block .right_block .chat_content .item{display:flex;margin:15px}.main_block .right_block .chat_content .item .avatar{background:#ccc;border-radius:6px;flex:0 0 40px;height:40px;margin-right:10px;width:40px}.main_block .right_block .chat_content .item .avatar_right .nickname{padding-top:2px}.main_block .right_block .chat_content .item .avatar_right .nickname .text_time{color:#999;font-size:12px;margin-left:10px}.main_block .right_block .chat_content .item .avatar_right .text{border:1px solid #efefef;border-radius:6px;box-shadow:0 1px 6px 0 rgba(0,0,0,.1);box-sizing:border-box;color:#666;font-size:12px;margin-top:5px;padding:5px 6px;width:100%;word-break:break-all}.main_block .right_block .chat_tool{border-top:1px solid #efefef;box-sizing:border-box;flex:0 0 140px}.main_block .right_block .chat_tool .tools{padding:10px}.main_block .right_block .chat_tool .tools i{cursor:pointer;margin-right:10px}.main_block .right_block .chat_tool .tools i:hover{color:var(--el-color-primary)}.main_block .right_block .chat_tool .send_textarea textarea{border:none;box-sizing:border-box;outline:none;padding:0 15px;width:100%}.main_block .right_block .chat_tool .send_textarea textarea::-webkit-input-placeholder{color:#ccc}.main_block .right_block .chat_tool .send_btn{margin-right:15px;margin-top:10px;text-align:right}",""]);const a=o},776:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(76798),o=r.n(n)()((function(e){return e[1]}));o.push([e.id,".chat_main[data-v-45b50fd4]{height:600px}",""]);const a=o},75722:(e,t,r)=>{r.d(t,{A:()=>ee});r(89195);var n=r(74061),o={class:"socket_status"},a={class:(0,n.normalizeClass)({main_block:!0})},i={class:"left_block"},c=["onClick"],l={class:"content_item"},s=["src"],u={class:"avatar_right"},p={class:"nickname text_over"},d={class:"text text_over"},f={class:"right_block"},h={class:"top_title"},m={class:"chat_content"},v={class:"scrollbar_inner",ref:"scrollbarDivRef"},g=["src"],k={class:"avatar_right"},y={class:"nickname text_over"},b={class:"text_time"},x={class:"text"},w={key:0},C={key:1},N={key:0,class:"chat_tool"},V={class:"tools"},E={class:"send_textarea"},L={class:"send_btn"};r(52675),r(89463),r(66412),r(2259),r(78125),r(23792),r(62062),r(34782),r(62010),r(4731),r(60479),r(69085),r(40875),r(79432),r(26099),r(3362),r(9391),r(47764),r(23500),r(62953);var B=(0,n.defineComponent)({name:"ChatDotSquare"});const S={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},P=(0,n.createVNode)("path",{fill:"currentColor",d:"M273.536 736H800a64 64 0 0 0 64-64V256a64 64 0 0 0-64-64H224a64 64 0 0 0-64 64v570.88L273.536 736zM296 800 147.968 918.4A32 32 0 0 1 96 893.44V256a128 128 0 0 1 128-128h576a128 128 0 0 1 128 128v416a128 128 0 0 1-128 128H296z"},null,-1),I=(0,n.createVNode)("path",{fill:"currentColor",d:"M512 499.2a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4zm192 0a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4zm-384 0a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4z"},null,-1);B.render=function(e,t,r,o,a,i){return(0,n.openBlock)(),(0,n.createBlock)("svg",S,[P,I])},B.__file="packages/components/ChatDotSquare.vue";const D=B;var z=r(6880),A=(0,n.defineComponent)({name:"Close"});const O={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},j=(0,n.createVNode)("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1);A.render=function(e,t,r,o,a,i){return(0,n.openBlock)(),(0,n.createBlock)("svg",O,[j])},A.__file="packages/components/Close.vue";const T=A;var F=(0,n.defineComponent)({name:"FolderOpened"});const M={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},H=(0,n.createVNode)("path",{fill:"currentColor",d:"M878.08 448H241.92l-96 384h636.16l96-384zM832 384v-64H485.76L357.504 192H128v448l57.92-231.744A32 32 0 0 1 216.96 384H832zm-24.96 512H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h287.872l128.384 128H864a32 32 0 0 1 32 32v96h23.04a32 32 0 0 1 31.04 39.744l-112 448A32 32 0 0 1 807.04 896z"},null,-1);F.render=function(e,t,r,o,a,i){return(0,n.openBlock)(),(0,n.createBlock)("svg",M,[H])},F.__file="packages/components/FolderOpened.vue";const R=F;var G=r(76199),$=r(26093);r(9299);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function U(){U=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new S(n||[]);return o(i,"_invoke",{value:V(e,r,c)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",h="executing",m="completed",v={};function g(){}function k(){}function y(){}var _={};s(_,i,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(P([])));x&&x!==r&&n.call(x,i)&&(_=x);var w=y.prototype=g.prototype=Object.create(_);function C(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function N(e,t){function r(o,a,i,c){var l=p(e[o],e,a);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==q(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function V(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=E(c,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=p(t,r,n);if("normal"===s.type){if(o=n.done?m:f,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=m,n.method="throw",n.arg=s.arg)}}}function E(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,E(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(q(t)+" is not iterable")}return k.prototype=y,o(w,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:k,configurable:!0}),k.displayName=s(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},C(N.prototype),s(N.prototype,c,(function(){return this})),t.AsyncIterator=N,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new N(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(w),s(w,l,"Generator"),s(w,i,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(B),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),B(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;B(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function J(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function W(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){J(a,n,o,i,c,"next",e)}function c(e){J(a,n,o,i,c,"throw",e)}i(void 0)}))}}const Y={components:{ChatDotSquare:D,Picture:z.A,Close:T,FolderOpened:R},props:{small:{type:Boolean,default:!1},position:{type:Boolean,default:!1},closeVis:{type:Boolean,default:!0},params:{type:Object,default:function(){return{}}}},setup:function(e){var t=(0,n.getCurrentInstance)().proxy,r=(0,n.ref)(!1),o=(0,n.ref)(!1),a=(0,n.ref)(!1),i=(0,n.reactive)({socket:null,timer:null,friends:[],chatList:[],pageParams:{per_page:50,page:1,total:0,last_page:1},selfData:{},selectId:0,params:{content:"",type:"text",file:""},uploadOptions:{name:"chat"}}),c=function(){var e=W(U().mark((function e(){var t;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=("http:"==document.location.protocol?"ws:":"wss:")+"//"+window.location.host+"/ws","undefined"!=typeof WebSocket){e.next=5;break}return e.abrupt("return",console.error("您的浏览器不支持socket"));case 5:if(null==i.socket){e.next=7;break}return e.abrupt("return");case 7:i.socket=new WebSocket(t,"chat"),i.socket.onopen=l,i.socket.onerror=s,i.socket.onmessage=u;case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,n.onBeforeUnmount)((function(){v()}));var l=function(){if(1==i.socket.readyState)return r.value=!0},s=function(){console.error("socket连接错误")},u=function(e){try{var t=JSON.parse(e.data);"heart"==t.type&&console.log(t),m(),i.pageParams.page=1,i.chatList=[],k(!(i.pageParams.page>1))}catch(e){return console.error(e)}},p=function(){var e=W(U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=i.socket){e.next=2;break}return e.abrupt("return");case 2:i.socket.send(JSON.stringify({type:"heart",data:{sid:i.selfData.sid}}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=W(U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=i.socket){e.next=2;break}return e.abrupt("return");case 2:return null!=i.timer&&clearInterval(i.timer),e.next=5,p();case 5:i.timer=setInterval(W(U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:case"end":return e.stop()}}),e)}))),4e4);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"text",n=g(i.selectId),o={provider:e.params.provider,rid:n.rid,rtype:n.rtype,content_type:r,content:"text"==r?i.params.content:i.params.file,token:e.params.token||""};a.value=!0,t.R.post("/Chat/send",o).then((function(e){e.code||("text"==r?i.params.content="":i.params.file="")})).finally((function(){a.value=!1,k(!0)}))},h=function(){var r=W(U().mark((function r(){return U().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c();case 2:t.R.post("/Chat/add",e.params).then((function(e){e.code||(o.value=!0,i.selfData=e,m(),d())}));case 3:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),m=function(){var r=W(U().mark((function r(){return U().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.R.post("/Chat/friends",e.params);case 2:i.friends=r.sent;case 3:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),v=function(){o.value=!1,null!=i.socket&&i.socket.close(),null!=i.timer&&clearInterval(i.timer)},g=function(e){if(0==i.selectId)return{};var t=null;return i.friends.map((function(r){r.id==e&&(t=r)})),i.selfData.sid==t.sid&&i.selfData.stype==t.stype?{rid:t.rid,rtype:t.rtype}:{rid:t.sid,rtype:t.stype}},k=function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=g(i.selectId),o={provider:e.params.provider,rid:n.rid,rtype:n.rtype,token:e.params.token||""};o=Object.assign(i.pageParams,o),t.R.post("/Chat/friend_content",o).then((function(e){var t,n,o,a;e.code||(i.pageParams.page=null!==(t=e.current_page)&&void 0!==t?t:1,i.pageParams.last_page=null!==(n=e.last_page)&&void 0!==n?n:1,i.pageParams.per_page=null!==(o=e.page)&&void 0!==o?o:50,i.pageParams.total=null!==(a=e.total)&&void 0!==a?a:1,_.reverse(e.data).map((function(e){i.chatList.push(e)})),r&&y())}))},y=function(){(0,n.nextTick)((function(){setTimeout((function(){t.$refs.scrollbarRef&&t.$refs.scrollbarRef.setScrollTop(parseFloat(t.$refs.scrollbarDivRef.clientHeight))}),200)}))},b=(0,$.gf)(),x=(0,$.X$)();return{Promotion:G.A,socketStatus:r,data:i,hide:o,loading:a,Token:b,uploadPath:x,loadInfoById:function(e){if(0==i.selectId)return{};var t=null;return i.friends.map((function(r){r.id==e&&(t=r)})),i.selfData.sid==t.sid&&i.selfData.stype==t.stype?t.rinfo:t.sinfo},loadInfoBySid:function(e,t){if(0==e)return{};var r={};return i.friends.map((function(n){n.sid==e&&n.stype==t&&(r=n.sinfo),n.rid==e&&n.rtype==t&&(r=n.rinfo)})),r},scrollbarChange:function(e){e.scrollLeft;if(0==e.scrollTop){if(i.pageParams.last_page<=i.pageParams.page)return;i.pageParams.page+=1,k()}},openChatItem:function(e){i.selectId=e,i.pageParams.page=1,i.chatList=[],k(!0)},send:f,handleSuccess:function(e){if(200!=e.code)return t.$message.error(e.msg);i.params.file=e.data,f("image")},openChat:h,closeChat:v}}};var X=r(85072),K=r.n(X),Q=r(89909),Z={insert:"head",singleton:!1};K()(Q.A,Z);Q.A.locals;const ee=(0,r(66262).A)(Y,[["render",function(e,t,_,B,S,P){var I=(0,n.resolveComponent)("ChatDotSquare"),D=(0,n.resolveComponent)("el-icon"),z=(0,n.resolveComponent)("Close"),A=(0,n.resolveComponent)("el-image"),O=(0,n.resolveComponent)("el-scrollbar"),j=(0,n.resolveComponent)("el-empty"),T=(0,n.resolveComponent)("Picture"),F=(0,n.resolveComponent)("el-upload"),M=(0,n.resolveComponent)("FolderOpened"),H=(0,n.resolveComponent)("el-button");return(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)({chat_main:!0,position_css:_.position})},[(0,n.withDirectives)((0,n.createElementVNode)("div",{class:(0,n.normalizeClass)({small_socket_status:B.socketStatus,small_main:!0,shadow:!0})},[(0,n.createElementVNode)("div",o,[(0,n.createVNode)(D,{size:24},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(I)]})),_:1})])],2),[[n.vShow,_.small]]),(0,n.withDirectives)((0,n.createElementVNode)("div",a,[(0,n.createElementVNode)("div",i,[(0,n.createElementVNode)("ul",null,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(B.data.friends,(function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("li",{key:t,onClick:function(t){return B.openChatItem(e.id)},class:(0,n.normalizeClass)({ck:e.id==B.data.selectId})},[(0,n.createElementVNode)("div",l,[(0,n.createElementVNode)("img",{class:"avatar",src:B.data.selfData.sid==e.sid&&B.data.selfData.stype==e.stype?e.rinfo.avatar||r(76291).A:e.sinfo.avatar||r(76291).A},null,8,s),(0,n.createElementVNode)("div",u,[(0,n.createElementVNode)("div",p,(0,n.toDisplayString)(B.data.selfData.sid==e.sid&&B.data.selfData.stype==e.stype?e.rinfo.nickname||"anonymous":e.sinfo.avatar||"anonymous"),1),(0,n.createElementVNode)("div",d,(0,n.toDisplayString)(e.lastMsg.content_type&&"text"==e.lastMsg.content_type?e.lastMsg.content:"[ "+e.lastMsg.content_type+" ]"),1)])])],10,c)})),128))])]),(0,n.createElementVNode)("div",f,[(0,n.createElementVNode)("div",h,[(0,n.withDirectives)((0,n.createElementVNode)("span",{onClick:t[0]||(t[0]=function(){return B.closeChat&&B.closeChat.apply(B,arguments)})},[(0,n.createVNode)(D,null,{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(z)]})),_:1})],512),[[n.vShow,_.closeVis]]),(0,n.createTextVNode)((0,n.toDisplayString)(B.loadInfoById(B.data.selectId).nickname||"Loading..."),1)]),(0,n.createElementVNode)("div",m,[B.data.selectId>0?((0,n.openBlock)(),(0,n.createBlock)(O,{key:0,class:"scrollbar",ref:"scrollbarRef",onScroll:B.scrollbarChange},{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("div",v,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(B.data.chatList,(function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"item",key:t},[(0,n.createElementVNode)("img",{class:"avatar",src:B.loadInfoBySid(e.sid,e.stype).avatar||r(76291).A},null,8,g),(0,n.createElementVNode)("div",k,[(0,n.createElementVNode)("div",y,[(0,n.createTextVNode)((0,n.toDisplayString)(B.loadInfoBySid(e.sid,e.stype).nickname||"anonymous")+" ",1),(0,n.createElementVNode)("span",b,"[ "+(0,n.toDisplayString)(e.created_at)+" ]",1)]),(0,n.createElementVNode)("div",x,["text"==e.content_type?((0,n.openBlock)(),(0,n.createElementBlock)("div",w,(0,n.toDisplayString)(e.content||"-"),1)):(0,n.createCommentVNode)("",!0),"image"==e.content_type?((0,n.openBlock)(),(0,n.createElementBlock)("div",C,[(0,n.createVNode)(A,{src:e.content,fit:"cover","preview-src-list":[e.content]},null,8,["src","preview-src-list"])])):(0,n.createCommentVNode)("",!0)])])])})),128))],512)]})),_:1},8,["onScroll"])):((0,n.openBlock)(),(0,n.createBlock)(j,{key:1}))]),B.data.selectId>0?((0,n.openBlock)(),(0,n.createElementBlock)("div",N,[(0,n.createElementVNode)("div",V,[(0,n.createVNode)(F,{style:{display:"inline-block"},"show-file-list":!1,action:"/api"+B.uploadPath+"uploads",headers:{Authorization:B.Token},data:B.data.uploadOptions,"on-success":B.handleSuccess},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(D,{size:22,color:"#666",title:"Upload Image"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(T)]})),_:1})]})),_:1},8,["action","headers","data","on-success"]),(0,n.createVNode)(D,{onClick:t[1]||(t[1]=function(t){return e.$message.info("暂未开发")}),size:22,color:"#666",title:"Upload File"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(M)]})),_:1})]),(0,n.createElementVNode)("div",E,[(0,n.withDirectives)((0,n.createElementVNode)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return B.data.params.content=e}),placeholder:"Please enter information"},null,512),[[n.vModelText,B.data.params.content]])]),(0,n.createElementVNode)("div",L,[(0,n.createVNode)(H,{type:"success",loading:B.loading,icon:B.Promotion,onClick:B.send},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(e.$t("btn.sendMsg")),1)]})),_:1},8,["loading","icon","onClick"])])])):(0,n.createCommentVNode)("",!0)])],512),[[n.vShow,!_.small]])],2)),[[n.vShow,B.hide]])}]])},74107:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var n=r(74061);var o=r(75722);const a={components:{baseView:r(47801).A,Chat:o.A},setup:function(e){var t=(0,n.getCurrentInstance)().proxy,r=(0,n.reactive)({chatParams:{provider:"users",rid:null,rtype:null,token:localStorage.getItem("seller_token")}});return(0,n.onMounted)((function(){t.$refs.chat.openChat()})),{data:r}}};var i=r(85072),c=r.n(i),l=r(776),s={insert:"head",singleton:!1};c()(l.A,s);l.A.locals;const u=(0,r(66262).A)(a,[["render",function(e,t,r,o,a,i){var c=(0,n.resolveComponent)("chat"),l=(0,n.resolveComponent)("base-view");return(0,n.openBlock)(),(0,n.createBlock)(l,null,{main_view:(0,n.withCtx)((function(){return[(0,n.createVNode)(c,{ref:"chat",closeVis:!1,params:o.data.chatParams},null,8,["params"])]})),_:1})}],["__scopeId","data-v-45b50fd4"]])},89195:(e,t,r)=>{var n=r(46518),o=r(77240);n({target:"String",proto:!0,forced:r(23061)("small")},{small:function(){return o(this,"small","","")}})}}]);